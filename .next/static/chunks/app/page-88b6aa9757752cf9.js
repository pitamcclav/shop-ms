(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8565:(e,t,s)=>{Promise.resolve().then(s.bind(s,9807))},9807:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115);function l(e){let{onSubmitAction:t,initialData:s,onCancelAction:l}=e,[i,n]=(0,r.useState)({name:(null==s?void 0:s.name)||"",description:(null==s?void 0:s.description)||"",category:(null==s?void 0:s.category)||""});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({...i,buying_price:(null==s?void 0:s.buying_price)||0,selling_price:(null==s?void 0:s.selling_price)||0,stock:(null==s?void 0:s.stock)||0,unit_type:(null==s?void 0:s.unit_type)||"piece",units_per_package:(null==s?void 0:s.units_per_package)||1,package_name:(null==s?void 0:s.package_name)||null})},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Product Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:i.name,onChange:e=>n({...i,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Description"}),(0,a.jsx)("textarea",{value:i.description,onChange:e=>n({...i,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Category"}),(0,a.jsx)("input",{type:"text",value:i.category,onChange:e=>n({...i,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"e.g., Electronics, Groceries, Clothing"})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"\uD83D\uDCA1 Note:"})," After creating the product, use the ",(0,a.jsx)("strong",{children:'"Stock Management"'})," tab to add inventory with buying and selling prices."]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition",children:s?"Update Product":"Add Product"}),l&&(0,a.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-300 transition",children:"Cancel"})]})]})}function i(e){let{products:t,onSubmitAction:s}=e,[l,i]=(0,r.useState)({product_id:0,quantity:1,custom_selling_price:0}),n=t.find(e=>e.id===l.product_id),c=l.custom_selling_price||(null==n?void 0:n.selling_price)||0,d=n&&c<n.buying_price,o=n?(c-n.buying_price)*l.quantity:0;return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.product_id>0&&(!d||confirm("⚠️ WARNING: You're selling below cost!\n\n"+"Buying Price: UGX ".concat(Math.round(n.buying_price),"\n")+"Selling Price: UGX ".concat(Math.round(c),"\n")+"Loss per unit: UGX ".concat(Math.round(n.buying_price-c),"\n")+"Total Loss: UGX ".concat(Math.round((n.buying_price-c)*l.quantity),"\n\n")+"Do you want to continue?"))&&(s({product_id:l.product_id,quantity:l.quantity,custom_selling_price:l.custom_selling_price||void 0}),i({product_id:0,quantity:1,custom_selling_price:0}))},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Select Product *"}),(0,a.jsxs)("select",{required:!0,value:l.product_id,onChange:e=>{let s=parseInt(e.target.value),a=t.find(e=>e.id===s);i({...l,product_id:s,custom_selling_price:(null==a?void 0:a.selling_price)||0})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,a.jsx)("option",{value:0,children:"-- Select a product --"}),t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - UGX ",Math.round(e.selling_price)," (Stock: ",e.stock,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Quantity *"}),(0,a.jsx)("input",{type:"number",required:!0,min:"1",max:(null==n?void 0:n.stock)||999,value:l.quantity,onChange:e=>{let t=parseInt(e.target.value);i({...l,quantity:isNaN(t)?1:t})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),n&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:["Selling Price (per unit) *",(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(Recommended: UGX ",Math.round(n.selling_price),")"]})]}),(0,a.jsx)("input",{type:"number",step:"0.01",required:!0,min:"0",value:l.custom_selling_price||n.selling_price,onChange:e=>{let t=parseFloat(e.target.value);i({...l,custom_selling_price:isNaN(t)?0:t})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\uD83D\uDCA1 You can adjust the price for discounts or special customers"})]}),n&&(0,a.jsxs)("div",{className:"p-4 rounded-md border ".concat(d?"bg-red-50 border-red-300":"bg-gray-50 border-gray-200"),children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Sale Summary:"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["Buying Price: ",(0,a.jsxs)("span",{className:"font-semibold",children:["UGX ",Math.round(n.buying_price)]})]}),(0,a.jsxs)("p",{children:["Selling Price: ",(0,a.jsxs)("span",{className:"font-semibold",children:["UGX ",Math.round(c)]})]}),(0,a.jsxs)("p",{children:["Profit per Unit: ",(0,a.jsxs)("span",{className:"font-semibold ".concat(o<0?"text-red-600":"text-green-600"),children:["UGX ",Math.round(c-n.buying_price)]})]}),(0,a.jsxs)("p",{className:"pt-2 border-t border-gray-300",children:["Total Sale: ",(0,a.jsxs)("span",{className:"font-semibold",children:["UGX ",Math.round(c*l.quantity)]})]}),(0,a.jsxs)("p",{className:o<0?"text-red-600 font-bold":"text-green-600 font-bold",children:["Total ",o<0?"Loss":"Profit",": UGX ",Math.round(Math.abs(o))]}),(0,a.jsxs)("p",{children:["Remaining Stock: ",(0,a.jsx)("span",{className:"font-semibold",children:n.stock-l.quantity})]})]}),d&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-red-100 rounded border border-red-400",children:(0,a.jsx)("p",{className:"text-red-800 font-bold text-sm",children:"⚠️ WARNING: SELLING BELOW COST!"})})]}),(0,a.jsx)("button",{type:"submit",disabled:0===l.product_id,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Record Sale"})]})}function n(e){let{products:t,onSubmitAction:s}=e,[l,i]=(0,r.useState)({product_id:0,quantity:1,buying_price:0,selling_price:0,supplier:"",unit_type:"piece",units_per_package:1,package_name:""}),n=t.find(e=>e.id===l.product_id);return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.product_id>0&&l.buying_price>0&&l.selling_price>0&&(s(l),i({product_id:0,quantity:1,buying_price:0,selling_price:0,supplier:"",unit_type:"piece",units_per_package:1,package_name:""}))},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Select Product *"}),(0,a.jsxs)("select",{required:!0,value:l.product_id,onChange:e=>{let s=parseInt(e.target.value),a=t.find(e=>e.id===s);i({...l,product_id:s,buying_price:(null==a?void 0:a.buying_price)||0,selling_price:(null==a?void 0:a.selling_price)||0,unit_type:(null==a?void 0:a.unit_type)||"piece",units_per_package:(null==a?void 0:a.units_per_package)||1,package_name:(null==a?void 0:a.package_name)||""})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,a.jsx)("option",{value:0,children:"-- Select a product --"}),t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - Current Stock: ",e.stock]},e.id))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Quantity *"}),(0,a.jsx)("input",{type:"number",required:!0,min:"1",value:l.quantity||"",onChange:e=>i({...l,quantity:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Buying Price (per unit) *"}),(0,a.jsx)("input",{type:"number",step:"0.01",required:!0,min:"0.01",value:l.buying_price||"",onChange:e=>i({...l,buying_price:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Selling Price (intended per unit) *"}),(0,a.jsx)("input",{type:"number",step:"0.01",required:!0,min:"0.01",value:l.selling_price||"",onChange:e=>i({...l,selling_price:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\uD83D\uDCA1 This will be the default selling price when making sales"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Supplier (Optional)"}),(0,a.jsx)("input",{type:"text",value:l.supplier,onChange:e=>i({...l,supplier:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"Enter supplier name"})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3 text-gray-700",children:"\uD83D\uDCE6 Bulk Package Settings (Optional)"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"If you buy in bulk (boxes/cartons) but sell individual pieces, set this up once and it will be remembered for this product."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Buy/Sell As"}),(0,a.jsxs)("select",{value:l.unit_type,onChange:e=>i({...l,unit_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",children:[(0,a.jsx)("option",{value:"piece",children:"Individual Pieces"}),(0,a.jsx)("option",{value:"package",children:"Bulk Packages (Box/Carton)"})]})]}),"package"===l.unit_type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Units per Package *"}),(0,a.jsx)("input",{type:"number",min:"1",required:!0,value:l.units_per_package||"",onChange:e=>i({...l,units_per_package:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"e.g., 24"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Package Name"}),(0,a.jsx)("input",{type:"text",value:l.package_name,onChange:e=>i({...l,package_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"e.g., Box, Carton, Case"})]})]})]}),"package"===l.unit_type&&l.units_per_package>1&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-md",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-700",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Conversion:"})," You're buying ",l.quantity," ",l.package_name||"package","(s) \xd7 ",l.units_per_package," pieces = ",(0,a.jsxs)("span",{className:"font-semibold",children:[l.quantity*l.units_per_package," individual pieces"]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Price per piece: UGX ",Math.round(l.buying_price/l.units_per_package)," buying | UGX ",Math.round(l.selling_price/l.units_per_package)," selling"]})]})]}),n&&l.buying_price>0&&l.selling_price>0&&(0,a.jsxs)("div",{className:"p-4 rounded-md border ".concat(l.buying_price>l.selling_price?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"),children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2 text-gray-700",children:"Purchase Summary:"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["Total Cost: ",(0,a.jsxs)("span",{className:"font-semibold",children:["UGX ",Math.round(l.buying_price*l.quantity)]})]}),(0,a.jsxs)("p",{children:["New Stock: ",(0,a.jsx)("span",{className:"font-semibold",children:n.stock+l.quantity})]}),(0,a.jsxs)("p",{children:["Current Avg. Buying Price: ",(0,a.jsxs)("span",{className:"font-semibold",children:["UGX ",Math.round(n.buying_price)]})]}),(0,a.jsxs)("p",{children:["Selling Price: ",(0,a.jsxs)("span",{className:"font-semibold",children:["UGX ",Math.round(l.selling_price)]})]}),(0,a.jsxs)("p",{children:["Expected Profit per Unit: ",(0,a.jsxs)("span",{className:"font-semibold ".concat(l.selling_price>l.buying_price?"text-green-600":"text-red-600"),children:["UGX ",Math.round(l.selling_price-l.buying_price)," (",((l.selling_price-l.buying_price)/l.selling_price*100).toFixed(1),"%)"]})]}),l.buying_price>l.selling_price&&(0,a.jsx)("p",{className:"text-red-600 font-semibold mt-2",children:"⚠️ Warning: Buying price is higher than selling price!"})]})]}),(0,a.jsx)("button",{type:"submit",disabled:0===l.product_id||l.buying_price<=0||l.selling_price<=0,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Add Stock (Purchase)"})]})}function c(){let[e,t]=(0,r.useState)("dashboard"),[s,c]=(0,r.useState)([]),[d,o]=(0,r.useState)([]),[p,x]=(0,r.useState)([]),[u,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),j=async()=>{let e=await fetch("/api/products");c(await e.json())},f=async()=>{let e=await fetch("/api/sales");o(await e.json())},N=async()=>{let e=await fetch("/api/purchases");x(await e.json())},v=async()=>{let e=await fetch("/api/stats");m(await e.json())};(0,r.useEffect)(()=>{j(),f(),N(),v()},[]);let _=async e=>{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(j(),v(),b(!1))},w=async e=>{h&&(await fetch("/api/products/".concat(h.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(j(),v(),g(null))},k=async e=>{confirm("Are you sure you want to delete this product?")&&(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok&&(j(),v())},S=async e=>{let t=await fetch("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();e.warning&&alert(e.warning),f(),j(),v()}else alert((await t.json()).error||"Failed to record sale")},P=async e=>{let t=await fetch("/api/purchases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(N(),j(),v()):alert((await t.json()).error||"Failed to record purchase")};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Shop Management System"})})}),(0,a.jsx)("nav",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>t("dashboard"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("dashboard"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>t("products"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("products"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Products"}),(0,a.jsx)("button",{onClick:()=>t("stock"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("stock"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Stock Management"}),(0,a.jsx)("button",{onClick:()=>t("sales"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("sales"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Sales"})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:["dashboard"===e&&u&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Products"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:u.totalProducts})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Sales"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:u.totalSales})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["UGX ",Math.round(u.totalRevenue)]})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg shadow p-6 border border-green-200",children:[(0,a.jsx)("h3",{className:"text-green-700 text-sm font-medium",children:"Total Profit"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:["UGX ",Math.round(u.totalProfit)]})]})]}),u.lowStockProducts.length>0&&(0,a.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Low Stock Alert"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1",children:u.lowStockProducts.map(e=>(0,a.jsxs)("li",{children:[e.name," - Only ",e.stock," left"]},e.id))})})]})})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Sales"})}),(0,a.jsx)("div",{className:"p-6",children:0===u.recentSales.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No sales yet"}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Selling Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Profit"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:u.recentSales.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.product_name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.quantity}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["UGX ",Math.round(e.selling_price)]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["UGX ",Math.round(e.total_price)]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:e.profit<0?"text-red-600 font-semibold":"text-green-600 font-semibold",children:["UGX ",Math.round(e.profit)]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.sale_date).toLocaleString()})]},e.id))})]})})})]})]}),"products"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-700",children:"Products"}),(0,a.jsx)("button",{onClick:()=>b(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:"Add Product"})]}),(y||h)&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:h?"Edit Product":"Add New Product"}),(0,a.jsx)(l,{onSubmitAction:h?w:_,initialData:h||void 0,onCancelAction:()=>{g(null),b(!1)}})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Buying Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Selling Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Info"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{let t=((e.selling_price-e.buying_price)/e.selling_price*100).toFixed(1),s=e.selling_price>e.buying_price;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.category||"-"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["UGX ",Math.round(e.buying_price)]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["UGX ",Math.round(e.selling_price)]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:s?"text-green-600 font-semibold":"text-red-600 font-semibold",children:s?t+"%":"LOSS"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(e.stock<10?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.stock})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"package"===e.unit_type&&e.units_per_package>1?(0,a.jsxs)("span",{className:"text-xs",children:["\uD83D\uDCE6 ",e.package_name||"Package"," ",(0,a.jsx)("br",{}),"(",e.units_per_package," pieces)"]}):(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Individual"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,a.jsx)("button",{onClick:()=>g(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>k(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id)})})]})})})]}),"stock"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Stock Management"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Add Stock (Purchase)"}),(0,a.jsx)(n,{products:s,onSubmitAction:P})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b",children:(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Purchase History"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Buying Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Cost"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Supplier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.product_name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.quantity}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["UGX ",Math.round(e.buying_price)]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap font-semibold",children:["UGX ",Math.round(e.total_cost)]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.supplier||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.purchase_date).toLocaleString()})]},e.id))})]})})]})]}),"sales"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Sales"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Record New Sale"}),(0,a.jsx)(i,{products:s,onSubmitAction:S})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b",children:(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Sales History"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Selling Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Profit"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.product_name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.quantity}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["UGX ",Math.round(e.selling_price)]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap font-semibold",children:["UGX ",Math.round(e.total_price)]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:e.profit<0?"text-red-600 font-bold":"text-green-600 font-bold",children:["UGX ",Math.round(e.profit)]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.sale_date).toLocaleString()})]},e.id))})]})})]})]})]})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=8565)),_N_E=e.O()}]);